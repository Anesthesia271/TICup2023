Tips：这是第一版markdown格式的赛事手册，#的个数代表标题的分级，在latex版本对应section subsection subsubsection 
仅为草稿。所有不确定的数据均用xx表示。我个人的想法会标注。

#### 赛事简介
##### 赛事简介
本次比赛为清华大学第十三届TI杯数字系统创新设计大赛。比赛与大一小学期“《单片机基础实验》课程相结合，旨在让同学们能够展现自我、实践学到的知识。
##### 参赛对象
主要面向选修了《单片机基础实验》课程的2022级本科生
##### 赛事日程
比赛日程安排如下：
活动	时间
报名启动	2023年6月30日00:01		
报名截止	2023年7月16日23:59
训练赛	2023年9月24日（校历秋季学期第1周周日）
初赛	2023年10月8日（校历秋季学期第3周周日）
决赛	2023年10月15日（校历秋季学期第4周周日）
注：以上日程的具体时间可能会稍作改动，最终以参赛选手微信群通知的时间为准。

##### 赛事形式
以组队或个人的形式通过报名参加比赛，每支参赛队伍人数不得超过3人（包括队长）  。
##### 比赛道具
本次比赛指定使用的单片机型号是MSP430（或MSP432、MSPM0，选手自愿选择。若选手选择MSP432或MSPM0，则需自行准备有关硬件）。大赛组织方会提供430的配套硬件（车模、蓝牙模块（用于实现与主办方上位机通信）、红外识别模块（用于循迹）及可能的其他模块）和相关技术支持。小车的电源模块可由选手自行选购，且科协将为每队提供一定报销额度。除此之外，不允许选手使用其他自行准备的外设参赛。赛事结束后，参赛队伍需尽快将比赛所用物品（包含单片机及车模）归还，届时将在微信群中通知，归还时请选手与负责人确认队伍信息。


#### 参赛流程
##### 报名
本次比赛的报名采取网络报名的方式，有意参赛的同学需仔细阅读以下注意事项后，在规定时间内填写报名问卷报名（每支队伍人数不超过3人，可单人组队参赛）。如超出报名期限报名，请与赛事负责人联系，说明情况，经赛事方讨论确定后另行通知。

##### 报名方式：
选手可以选择以下任意一种方式进行报名。报名成功后，大赛组织方会联系队长。如果在报名结束2天内，您未获得联系，请您主动与大赛组织方联系。
1. 扫描本指南最后一页报名二维码，填写问卷；
2. 关注“电机之声”公众号，进入相关推送，在文末扫描二维码。

##### 报名费用：
本次比赛无需缴纳报名费用。

##### 信息填写要求：
报名需要填写以下内容：队伍名称（报名后可修改）；队长姓名、学号、班级、手机号码、微信号；队员姓名、学号、班级等信息，信息完整方可顺利报名。队伍报名资格审查通过，并承诺遵守本次大赛的各项要求后，方可参赛。
报名成功之后，组织方将向选手发送确认邮件或短信，确认报名成功并邀请选手进入选手微信群。若未收到，请及时与大赛负责人联系。

##### 训练赛
本次TI杯会进行多次分层训练赛，旨在帮助选手完全熟悉小车的操作方法、测试小车与上位机之间的通信功能等技术细节，同时在赛场上实际测试小车的循迹等功能。训练赛内容分为五级，分别为：
第一级：小车可以行驶
第二级：小车可以识别赛道，在赛道合法范围行驶，不乱跑出赛道
第三级：小车可以完成暂停、转弯等动作，并且没有跑出赛道
第四级：小车可以收发信息，准确到达指定位置
第五级：小车可以采取策略，选取道路行驶。
训练赛完成情况不影响正赛参加资格。

##### 正赛
比赛流程见“比赛内容”部分。
在正赛中，赛方将根据选手的分数进行排名，现场公布进入决赛的队伍。
在决赛中，赛方将根据选手的分数进行排名，现场公布并向获奖选手发放奖励，详见“奖励办法”部分。

#### 比赛内容
本次比赛的赛事背景是在“废土”上连接不同电压等级的杆塔，根据所连接的杆塔得到不同的分数，在规定的行进路程内，根据各个队伍得到的分数进行排名。
本次比赛的灵感来源于“连连看”小游戏，大赛的目标是在规定步数内尽可能多地连接方块。方块位于地图格点的交叉处，且有不同颜色，不同颜色分值不同，小车需要连续连接两个相同颜色的方块才可得到相应的分数，选手需要采取策略控制小车选取合适的路径以获得最多分数。
本次比赛分为训练赛、初赛、决赛三个环节，各轮比赛的规则将在下文详细介绍。

##### 通用规则
###### 基本名词解释

1.上位机：组织方计算机，通过摄像头和图像处理算法识别小车位置并判断小车是否处于合法范围，并在对小车发布命令（地图信息、开始和结束指令和暂停指令等）以及接受小车信息。
2.小车：大赛组织方将为各队伍提供车辆模型，各队伍需在车模基础上进行硬件安装和调试，并参加正式比赛。小车顶部需安装由组织方提供识别方块（供上位机监测小车位置）。车模的具体参数和实物图见附录。
3.赛场：赛场如下图，在比赛过程中，小车应当沿黑色网格线行驶，且不应超出由网格确定的合法范围（详见###### 比赛赛道部分）
4.步：以地图（详见下方的地图介绍）每格正方形的边长为一步，如果没有沿着正方形边线行走，而是沿对角线行走则记为犯规。
5.在进行比赛之前，选手无法知晓不同颜色方块的具体位置，比赛地图可参考样图。在比赛开始之后，上位机向小车发送地图信息，具体发送方式为一系列三元数组（x,y,z）。这里，x，y分别是有色点在地图上的横纵坐标，z是这个有色点对应的分值。

###### 比赛赛道
赛道实物如下图所示，每个整格点的间距为40cm，中间黑色线宽度为1.6cm。
                ![](C:\Users\jq-wa\Desktop\2023科协赛事部\赛事手册\1.png)
整个比赛场地大小为10×10（格点数），如下图所示：
               ![](C:\Users\jq-wa\Desktop\2023科协赛事部\赛事手册\2.png)
其中坐标规定如下：赛场左下角格点坐标为(0,0)，x轴和y轴方向如图所示。最下方为第0行，最左方为第0列，第m列第n行坐标规定为(m,n)。

###### 赛道规则

1．小车应当沿着黑色网格线行动。赛方允许小车的行进轨迹与黑色网格线有一定偏差，但要求小车车身投影与黑色网格线相交。上位机将实时对小车的位置进行判定，判定超出合法范围时上位机将发出停止命令。选手应确保小车可被上位机准确识别，否则将会影响判定。
2. 小车在比赛中不得离开网格线区域，否则判为出界犯规；小车在比赛过程中只能前进或转弯。小车以后退姿态越过格点将判为倒车犯规。若选手的小车出现倒车、出界犯规以及走出黑色网格线等情况，赛方将会对选手施加一定的惩罚，惩罚措施见“行动规则”部分。

##### 训练赛

###### 比赛任务和要求
本次大赛设置了训练赛环节，旨在帮助有意参加初赛的同学熟悉比赛用车辆、赛场的设施及操作方法。 
训练赛将于2023.9.24举行一次，本届训练赛将对选手的要求分为五级，第一级为小车可以行驶，第二级为小车可以识别赛道，在赛道合法范围行驶，不乱跑出赛道，第三级为小车可以完成暂停、转弯等动作，并且没有跑出赛道，第四级为小车可以收发信息，准确到达指定位置，第五级为小车可以采取策略，选取道路行驶，每级难度将会逐渐提升，旨在帮助选手逐步完善小车的功能，选手也可根据训练赛的难度决定是否参加初赛。
我个人的想法
第一级：小车沿任意直线行走5s
第二级：小车沿赛道行走5s
第三级：小车沿赛道行走一段距离，在任意一个拐弯处沿赛道拐弯，然后停止
（前三段的开始，停止都可以由选手自己控制/预设）
第四级：小车接受上位机的开始信息，沿赛道行走一段距离，在任意一个拐弯处正常沿赛道拐弯，然后接受上位机的停止信息，停止。
第五级：小车接受上位机的开始信息和一个点信息（x,y），采取路程规划的策略走向这个点，然后接受上位机的停止信息，停止。

训练赛通过后，赛方将对参赛选手提供科协纪念品。同时，训练赛的完成情况不会影响初赛和决赛的参赛资格。

###### 比赛细则和要求
-行动规则
1．小车应遵守通用行动规则。若小车违反通用行动规则，工作人员会将小车复位至起点，重新开始比赛。
2．在小车行驶过程中，需要在指定坐标处接受指令并停止。若小车未能及时转弯或最终停止，由工作人员将其复位至起点，重新开始比赛。

-信息规则

前三段不设置小车和上位机的具体通信。
1.启动信息：在比赛开始前，上位机向小车发送启动信息，小车收到信息后不必回复，直接开始行动。
2.目标点信息：在比赛开始前，上位机向小车发送目标点坐标信息，小车收到信息后不必回复，直接开始行动。每个选手的目标点坐标都是相同的。
3.停止信息：上位机将由赛方手动向小车发送紧急停止信息，小车应该在收到信息后立刻停止行动。
通信的具体规则见通信协议文档。


##### 初赛

###### 赛事背景

公元20xx年，另一个时间线上的地球。
一场可怖的灾难席卷了这个美丽的蓝色星球，起因未知的沙尘暴几乎带走了人类文明所有引以为傲的造物。但这场灾难似乎对人类开了一个小小的玩笑：当这里的人们抬起头时，首先注意到的不再是高耸入云的高楼大厦，而是一根根——电线杆。
好吧，说是电线杆有点不够严谨。这片土地上的输电系统奇迹般地得以保留了一部分——几乎所有的杆塔都完好无损——尽管它们之间再也没有输电线路连接。
为了重建电力系统，为废土世界带来一丝曙光，T大电机系的同学们担负起了重新搭建输电线路的任务。他们穿着老旧的制服，手持操作手册和工具材料，踏上了一段充满荆棘和荒芜的旅程。
他们的目标是连接不同电压等级的杆塔，重新建立电力网络，为人们带来光明和希望。相同电压等级的杆塔才能相互连接。不同电压等级的杆塔之间的电力系统是独立的，不能直接相互连接。只有保证连接相同电压等级的杆塔，才有可能重建复杂的电力系统
这让他们想起了小时候玩过的连连看小游戏。但此时此刻，在更广袤的尺度上，他们正在完成一个伟大的“连连看”。

作为T大电机系的同学，你拥有一辆作业用的无人小车，接收到了勘探队员发送给你的地图信息。这个地图包含了数个杆塔的坐标，以及其对应的电压等级。你现在要做的就是：编写程序，让小车自动规划路线，尽可能多的连接电压等级相同的杆塔。除此之外，你的小车燃料是有限的，这意味着你一次行动只能最多行驶一定的步数（不需要考虑返程）。

###### 比赛任务及要求

在初赛中，选手将进行一场个人挑战赛。小车放置在赛道上后，上位机向小车发送地图信息和启动信息，小车需要根据地图信息规划路线，并开始行进。小车需要尽可能多的消除染色点。消除染色点的方法是：行进至第一个染色点，停止，向上位机发送一次“消除1”指令，上位机接受并成功处理后，发送指令“继续”，小车继续行动；行进至第二个相同颜色的染色点，停止，向上位机发送一次“消除2”指令，上位机接受并成功处理后，发送指令“继续”，小车继续行动，这是相当于完成了一次“消除”。小车在行进的过程中，不允许直接通过染色的点。此外，小车每一次比赛所能够行驶的步数是有限的。
在初赛中，赛方给出的地图较为简单，选手按照行动规则，在规定步数内获取更多的分数，所有小组完赛后，分数从高到低排名，相同分数的，所用时间更少的队伍排名更高。

###### 比赛细则
-行动规则

1．小车应遵守通用行动规则。若小车违反通用行动规则，视为犯规。每位选手有一次犯规机会，即犯规者分数清零，重新开始比赛，无惩罚。若小车第二次违反通用行动规则，取消比赛资格。
2． 在小车行驶过程中，如果行驶到想要消除的方块的坐标点时，需要停车（建议时间不超过2秒）向上位机发送信号确认，在收到上位机的回复信息后，继续行驶，否则视为消除无效。
3.开始比赛后，选手一律不允许修改代码，比赛全程小车处于自动控制状态，选手不可以人工操控选择路径。

-信息规则

1. 坐标与启动信息：在比赛开始前，上位机向小车发送启动信息，小车收到信息后不必回复，直接开始行动。
2. 消除信息：小车需要启动并沿直线行驶到想要消除的方块的坐标点，到达该坐标点后，小车需向上位机发送信息确认，在收到上位机的回复信息后，继续行驶。当步数用尽时，上位机会发送停止指令，小车需要在收到指令后立刻停止。
3. 紧急停止信息：小车犯规后或步数用尽时，上位机将向小车发送紧急停止信息，小车应该在收到信息后立刻停止行动，并结束本回合。
通信的具体规则见通信协议文档。

-得分规则

1.小车按照指定规则连续成功消除两个颜色相同的点才可获得相应的分数
2.在行驶过程中经过其他颜色的点位时，会受到惩罚。（这里的经过指的是：没有在这个点上停留，发出消除信息），若经过其他颜色的点，扣xx分。

-晋级规则

按照排名，取前12名队伍参与决赛。

##### 决赛
###### 赛事背景
为了重建电力系统，为废土世界带来一丝曙光，T大电机系的同学们担负起了重新搭建输电线路的任务。他们穿着老旧的制服，手持操作手册和工具材料，踏上了一段充满荆棘和荒芜的旅程。

他们穿越废弃的城市废墟，跋涉在无垠的沙漠中，冒险穿越危险的沙尘区。他们时常遭遇野兽的袭击，但他们凭借机智和勇气，总能化险为夷。他们不断寻找着能够使用的电线和设备，修复受损的电力线路。

然而，连接不同电压等级的杆塔并非易事。他们需要仔细研究电力系统手册，理解电力传输的原理，同时还要面对无数的困难和挑战。但在更加危险的地方，往往蕴含着更大的收获……

作为T大电机系的同学，你拥有一辆作业用的无人小车，接收到了勘探队员发送给你的地图信息。这个地图包含了相比于正赛部分更多的杆塔的坐标，以及其对应的电压等级；除此之外，新的地图还包含不能被连接的损坏杆塔，以及三个一组的特殊杆塔。你现在要做的就是：编写程序，让小车自动规划路线，尽可能多的连接电压等级相同的杆塔。你的小车燃料是有限的，这意味着你一次行动只能最多行驶一定的步数（不需要考虑返程）。但与此同时，你可能能够获得一些“增益”。你可以选择参与更紧急的任务，这代表你在连接相同数量的杆塔时能够获得更高的分数；你也可以选择更高级的小车，这代表你会有更多的燃料供你行驶。除此之外，你还可以选择别的特殊增益——但不要忘了你的目的，尽可能连接更多的杆塔，获得最高的分数。


###### 比赛任务及要求

在决赛中，选手将进行一场个人挑战赛。小车放置在赛道上后，上位机向小车发送地图信息和启动信息，小车需要根据地图信息规划路线，并开始行进。小车需要尽可能多的消除染色点。消除染色点的方法是：行进至第一个染色点，停止，向上位机发送一次“消除1”指令，上位机接受并成功处理后，发送指令“继续”，小车继续行动；行进至第二个相同颜色的染色点，停止，向上位机发送一次“消除2”指令，上位机接受并成功处理后，发送指令“继续”，小车继续行动，这是相当于完成了一次“消除”。小车在行进的过程中，不允许直接通过染色的点。此外，小车每一次比赛所能够行驶的步数是有限的。对于特殊的点的处理方法，详见比赛细则。



比赛任务与初赛基本相同，决赛的地图较为复杂，且加入了一些有趣的bonus成分

###### 比赛细则
-行动规则

1．小车应遵守通用行动规则。若小车违反通用行动规则，视为犯规。每位选手有一次犯规机会，即犯规者分数清零，重新开始比赛，无惩罚。若小车第二次违反通用行动规则，取消比赛资格。
2．在小车行驶过程中，如果行驶到想要消除的方块的坐标点时，需要停车（建议时间不超过2秒）向上位机发送信号确认，在收到上位机的回复信息后，继续行驶，否则视为消除无效。
3．小车在行驶过程中，如果行驶到障碍点，扣除xx分。
4．开始比赛后，选手一律不允许修改代码，比赛全程小车处于自动控制状态，选手不可以人工操控选择路径。

-信息规则

1. 坐标与启动信息：在比赛开始前，上位机向小车发送地图信息和启动信息，小车收到信息后不必回复，直接开始行动。
2. 消除信息：小车需要启动并沿直线行驶到想要消除的方块的坐标点，到达该坐标点后，小车需向上位机发送信息确认，在收到上位机的回复信息后，继续行驶。当步数用尽时，上位机会发送停止指令，小车需要在收到指令后立刻停止。
3. 紧急停止信息：小车犯规后或步数用尽时，上位机将向小车发送紧急停止信息，小车应该在收到信息后立刻停止行动，并结束本回合。
通信的具体规则见通信协议文档。

-得分规则

1.小车按照指定规则连续成功消除两个颜色相同的点才可获得相应的分数
2．在行驶过程中经过其他颜色的点位时，会受到惩罚。（这里的经过指的是：没有在这个点上停留，发出消除信息），若经过其他颜色的点，扣xx分。小车在行驶过程中，如果行驶到障碍点或者在障碍点停下，扣除xx分。
3．在地图上会有三个一对的点，它们都同色。当你选择一个点时，只能消除另外最多一个同色的点，此时第三个点自动变成障碍点。
-增益规则

在决赛中，每一位选手可以选择一个增益。
这里的增益包括：
1.增加小车行驶的总步长xx
2.增加xx分数
3.减少xx个障碍点

除此之外，每一位选手还有一次机会，改变自己的所在起点。选手一共有四种选择：（0  0）（0  9）（9  0）（9  9）

#### 奖励办法
本次大赛将对在比赛中表现突出的参赛队予以适当的奖励。本次大赛共设一、二、三等奖，具体的奖金金额如下：
奖项	数量	奖金
一等奖	1	6000元
二等奖	2	3000元
三等奖	3	2000元
#### 联系方式

电机系学生科协 王俊琪

jq-wang21@mails.tsinghua.edu.cn

电机系学生科协 邓俊豪

dengjh21@mails.tsinghua.edu.cn

电机系学生科协 刘卓成

liuzhuoc20@mails.tsinghua.edu.cn



电机系科协公邮：
 deesast@126.com

#### 退赛方式
各位选手通过报名问卷向大赛组委会报名并通过审批后即取得了参赛资格。队伍退赛需与大赛负责人联系确认后，方可退赛。比赛过程中由于各种原因不能坚持参加比赛需要退赛的同学，可发邮件到科协公邮（deesast@126.com）或直接联系大赛负责人说明情况，申请退赛。

